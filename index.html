<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#8b5cf6">
    <meta name="description" content="Flares - Track your mood and connect with your support network">
    <title>Flares - Mood Tracker</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="flares.css">
    <link rel="manifest" href="/manifest.json">
</head>
<body>
    <div class="stars"></div>
    <div class="flares-app">
        <!-- Navigation Header -->
        <nav class="flares-nav">
            <div class="nav-container">
                <div class="logo">Flares</div>
                <button class="settings-btn" id="settingsBtn">⚙️</button>
            </div>
        </nav>

        <!-- Screen 1: Mood Selection (Flares) -->
        <div class="screen active" id="moodScreen">
            <div class="screen-content">
                <h1 class="screen-title">How are you feeling?</h1>
                <p class="screen-subtitle">Select your current state</p>

                <div class="flares-container">
                    <button class="flare-btn green" data-mood="green">
                        <div class="flare-light"></div>
                        <span class="flare-label">Stable</span>
                        <span class="flare-desc">Feeling good and in control</span>
                    </button>

                    <button class="flare-btn amber" data-mood="amber">
                        <div class="flare-light"></div>
                        <span class="flare-label">Struggling</span>
                        <span class="flare-desc">Finding things challenging</span>
                    </button>

                    <button class="flare-btn red" data-mood="red">
                        <div class="flare-light"></div>
                        <span class="flare-label">Overwhelmed</span>
                        <span class="flare-desc">Need support right now</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Screen 2: Emoji Selection -->
        <div class="screen" id="emojiScreen">
            <div class="screen-content">
                <h1 class="screen-title">What describes your mood?</h1>
                <p class="screen-subtitle">Select one or more emotions</p>

                <div class="emoji-grid" id="emojiGrid">
                    <!-- Populated dynamically based on mood -->
                </div>

                <div class="screen-actions">
                    <button class="btn btn-secondary" id="backToMood">Back</button>
                    <button class="btn btn-primary" id="continueToTriggers">Continue</button>
                </div>
            </div>
        </div>

        <!-- Screen 3: Triggers Selection -->
        <div class="screen" id="triggersScreen">
            <div class="screen-content">
                <h1 class="screen-title">What might have contributed?</h1>
                <p class="screen-subtitle">Select any relevant triggers (optional)</p>

                <div class="triggers-grid" id="triggersGrid">
                    <!-- Populated dynamically based on mood -->
                </div>

                <div class="screen-actions">
                    <button class="btn btn-secondary" id="backToEmoji">Back</button>
                    <button class="btn btn-primary" id="continueToPreview">Continue</button>
                </div>
            </div>
        </div>

        <!-- Screen 4: Notification Preview & Send -->
        <div class="screen" id="previewScreen">
            <div class="screen-content">
                <h1 class="screen-title">Ready to share</h1>
                <p class="screen-subtitle">Review and send to your support network</p>

                <div class="notification-preview" id="notificationPreview">
                    <!-- Preview populated dynamically -->
                </div>

                <div class="support-list" id="supportList">
                    <h3>Send to:</h3>
                    <div class="supports-container" id="supportsContainer">
                        <!-- Support contacts populated dynamically -->
                    </div>
                    <button class="btn btn-link" id="manageSupportBtn">Manage Support Contacts</button>
                </div>

                <div class="screen-actions">
                    <button class="btn btn-secondary" id="backToTriggers">Back</button>
                    <button class="btn btn-primary" id="sendNotification">Send via Email</button>
                    <button class="btn btn-primary" id="sendViaSMS" style="display: none;">Send via SMS</button>
                    <button class="btn btn-tertiary" id="shareViaLink">Share via Link</button>
                </div>
            </div>
        </div>

        <!-- Settings Modal -->
        <div class="modal" id="settingsModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Settings</h2>
                    <button class="modal-close" id="closeSettings">×</button>
                </div>
                <div class="modal-body">
                    <h3>Support Contacts</h3>
                    <p class="help-text">Add people who can receive your Flares notifications</p>

                    <div class="contacts-list" id="contactsList">
                        <!-- Contacts populated dynamically -->
                    </div>

                    <div class="add-contact-form">
                        <input type="text" id="contactName" placeholder="Name" class="input">
                        <input type="email" id="contactEmail" placeholder="Email" class="input">
                        <button class="btn btn-primary" id="addContactBtn">Add Contact</button>
                    </div>

                    <hr>

                    <h3>Your History</h3>
                    <div class="history-list" id="historyList">
                        <!-- History populated dynamically -->
                    </div>
                    <button class="btn btn-link" id="clearHistoryBtn">Clear History</button>
                </div>
            </div>
        </div>

        <!-- Success Modal -->
        <div class="modal" id="successModal">
            <div class="modal-content success">
                <div class="success-icon">✓</div>
                <h2>Notification Sent!</h2>
                <p>Your support network has been notified.</p>
                <button class="btn btn-primary" id="doneBtn">Done</button>
            </div>
        </div>

        <!-- Share Link Modal -->
        <div class="modal" id="shareLinkModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Share via Link</h2>
                    <button class="modal-close" id="closeShareLink">×</button>
                </div>
                <div class="modal-body">
                    <p class="help-text">Copy this link to share your current state:</p>
                    <div class="share-link-container">
                        <input type="text" id="shareLink" readonly class="input share-link">
                        <button class="btn btn-primary" id="copyLinkBtn">Copy</button>
                    </div>
                    <p class="help-text small">You can send this link via text, messenger, or any app you prefer.</p>
                </div>
            </div>
        </div>
    </div>

    <script src="flares.js"></script>
</body>
</html>
